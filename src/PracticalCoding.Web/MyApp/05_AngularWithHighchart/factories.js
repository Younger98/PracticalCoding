// define a factory for later charting demo
angular.module('myapp')
.factory('ChartDataFactory', function () {
    // data source URL#1: http://index.ndc.gov.tw/inQuery.aspx?lang=1&type=it03 
    // data source URL#2: http://index.ndc.gov.tw/inQuery.aspx?lang=1&type=it02
    var trainingdatas = [
        {
            "Period": "2010/1/1",
            "Period_UTC": 1262304000000.0,
            "TAIEX": 8099,
            "MonitoringIndex": 38.0,
            "LeadingIndex": 92.55,
            "CoincidentIndex": 88.49,
            "LaggingIndex": 79.22
        }, {
            "Period": "2010/2/1",
            "Period_UTC": 1264982400000.0,
            "TAIEX": 7432,
            "MonitoringIndex": 38.0,
            "LeadingIndex": 93.36,
            "CoincidentIndex": 89.96,
            "LaggingIndex": 80.33
        }, {
            "Period": "2010/3/1",
            "Period_UTC": 1267401600000.0,
            "TAIEX": 7775,
            "MonitoringIndex": 39.0,
            "LeadingIndex": 93.99,
            "CoincidentIndex": 91.29,
            "LaggingIndex": 81.52
        }, {
            "Period": "2010/4/1",
            "Period_UTC": 1270080000000.0,
            "TAIEX": 8052,
            "MonitoringIndex": 39.0,
            "LeadingIndex": 94.44,
            "CoincidentIndex": 92.45,
            "LaggingIndex": 82.75
        }, {
            "Period": "2010/5/1",
            "Period_UTC": 1272672000000.0,
            "TAIEX": 7526,
            "MonitoringIndex": 37.0,
            "LeadingIndex": 94.8,
            "CoincidentIndex": 93.49,
            "LaggingIndex": 84.0
        }, {
            "Period": "2010/6/1",
            "Period_UTC": 1275350400000.0,
            "TAIEX": 7383,
            "MonitoringIndex": 37.0,
            "LeadingIndex": 95.11,
            "CoincidentIndex": 94.45,
            "LaggingIndex": 85.22
        }, {
            "Period": "2010/7/1",
            "Period_UTC": 1277942400000.0,
            "TAIEX": 7639,
            "MonitoringIndex": 38.0,
            "LeadingIndex": 95.41,
            "CoincidentIndex": 95.41,
            "LaggingIndex": 86.33
        }, {
            "Period": "2010/8/1",
            "Period_UTC": 1280620800000.0,
            "TAIEX": 7884,
            "MonitoringIndex": 38.0,
            "LeadingIndex": 95.72,
            "CoincidentIndex": 96.39,
            "LaggingIndex": 87.32
        }, {
            "Period": "2010/9/1",
            "Period_UTC": 1283299200000.0,
            "TAIEX": 8040,
            "MonitoringIndex": 37.0,
            "LeadingIndex": 96.04,
            "CoincidentIndex": 97.42,
            "LaggingIndex": 88.23
        }, {
            "Period": "2010/10/1",
            "Period_UTC": 1285891200000.0,
            "TAIEX": 8210,
            "MonitoringIndex": 34.0,
            "LeadingIndex": 96.39,
            "CoincidentIndex": 98.51,
            "LaggingIndex": 89.1
        }, {
            "Period": "2010/11/1",
            "Period_UTC": 1288569600000.0,
            "TAIEX": 8350,
            "MonitoringIndex": 32.0,
            "LeadingIndex": 96.78,
            "CoincidentIndex": 99.62,
            "LaggingIndex": 90.02
        }, {
            "Period": "2010/12/1",
            "Period_UTC": 1291161600000.0,
            "TAIEX": 8777,
            "MonitoringIndex": 34.0,
            "LeadingIndex": 97.15,
            "CoincidentIndex": 100.64,
            "LaggingIndex": 91.1
        }, {
            "Period": "2011/1/1",
            "Period_UTC": 1293840000000.0,
            "TAIEX": 8971,
            "MonitoringIndex": 34.0,
            "LeadingIndex": 97.45,
            "CoincidentIndex": 101.39,
            "LaggingIndex": 92.36
        }, {
            "Period": "2011/2/1",
            "Period_UTC": 1296518400000.0,
            "TAIEX": 8743,
            "MonitoringIndex": 34.0,
            "LeadingIndex": 97.65,
            "CoincidentIndex": 101.84,
            "LaggingIndex": 93.77
        }, {
            "Period": "2011/3/1",
            "Period_UTC": 1298937600000.0,
            "TAIEX": 8575,
            "MonitoringIndex": 31.0,
            "LeadingIndex": 97.77,
            "CoincidentIndex": 101.97,
            "LaggingIndex": 95.2
        }, {
            "Period": "2011/4/1",
            "Period_UTC": 1301616000000.0,
            "TAIEX": 8861,
            "MonitoringIndex": 29.0,
            "LeadingIndex": 97.78,
            "CoincidentIndex": 101.83,
            "LaggingIndex": 96.64
        }, {
            "Period": "2011/5/1",
            "Period_UTC": 1304208000000.0,
            "TAIEX": 8911,
            "MonitoringIndex": 27.0,
            "LeadingIndex": 97.67,
            "CoincidentIndex": 101.52,
            "LaggingIndex": 98.01
        }, {
            "Period": "2011/6/1",
            "Period_UTC": 1306886400000.0,
            "TAIEX": 8749,
            "MonitoringIndex": 25.0,
            "LeadingIndex": 97.46,
            "CoincidentIndex": 101.08,
            "LaggingIndex": 99.21
        }, {
            "Period": "2011/7/1",
            "Period_UTC": 1309478400000.0,
            "TAIEX": 8681,
            "MonitoringIndex": 23.0,
            "LeadingIndex": 97.16,
            "CoincidentIndex": 100.56,
            "LaggingIndex": 100.25
        }, {
            "Period": "2011/8/1",
            "Period_UTC": 1312156800000.0,
            "TAIEX": 7763,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 96.84,
            "CoincidentIndex": 99.99,
            "LaggingIndex": 101.1
        }, {
            "Period": "2011/9/1",
            "Period_UTC": 1314835200000.0,
            "TAIEX": 7385,
            "MonitoringIndex": 21.0,
            "LeadingIndex": 96.64,
            "CoincidentIndex": 99.45,
            "LaggingIndex": 101.72
        }, {
            "Period": "2011/10/1",
            "Period_UTC": 1317427200000.0,
            "TAIEX": 7345,
            "MonitoringIndex": 19.0,
            "LeadingIndex": 96.65,
            "CoincidentIndex": 99.08,
            "LaggingIndex": 102.14
        }, {
            "Period": "2011/11/1",
            "Period_UTC": 1320105600000.0,
            "TAIEX": 7275,
            "MonitoringIndex": 16.0,
            "LeadingIndex": 96.88,
            "CoincidentIndex": 98.84,
            "LaggingIndex": 102.4
        }, {
            "Period": "2011/12/1",
            "Period_UTC": 1322697600000.0,
            "TAIEX": 6969,
            "MonitoringIndex": 14.0,
            "LeadingIndex": 97.24,
            "CoincidentIndex": 98.77,
            "LaggingIndex": 102.49
        }, {
            "Period": "2012/1/1",
            "Period_UTC": 1325376000000.0,
            "TAIEX": 7177,
            "MonitoringIndex": 13.0,
            "LeadingIndex": 97.65,
            "CoincidentIndex": 98.9,
            "LaggingIndex": 102.42
        }, {
            "Period": "2012/2/1",
            "Period_UTC": 1328054400000.0,
            "TAIEX": 7856,
            "MonitoringIndex": 15.0,
            "LeadingIndex": 97.99,
            "CoincidentIndex": 99.18,
            "LaggingIndex": 102.33
        }, {
            "Period": "2012/3/1",
            "Period_UTC": 1330560000000.0,
            "TAIEX": 8020,
            "MonitoringIndex": 14.0,
            "LeadingIndex": 98.19,
            "CoincidentIndex": 99.64,
            "LaggingIndex": 102.37
        }, {
            "Period": "2012/4/1",
            "Period_UTC": 1333238400000.0,
            "TAIEX": 7621,
            "MonitoringIndex": 14.0,
            "LeadingIndex": 98.17,
            "CoincidentIndex": 100.04,
            "LaggingIndex": 102.48
        }, {
            "Period": "2012/5/1",
            "Period_UTC": 1335830400000.0,
            "TAIEX": 7357,
            "MonitoringIndex": 15.0,
            "LeadingIndex": 98.0,
            "CoincidentIndex": 100.31,
            "LaggingIndex": 102.59
        }, {
            "Period": "2012/6/1",
            "Period_UTC": 1338508800000.0,
            "TAIEX": 7143,
            "MonitoringIndex": 15.0,
            "LeadingIndex": 97.79,
            "CoincidentIndex": 100.44,
            "LaggingIndex": 102.67
        }, {
            "Period": "2012/7/1",
            "Period_UTC": 1341100800000.0,
            "TAIEX": 7187,
            "MonitoringIndex": 16.0,
            "LeadingIndex": 97.63,
            "CoincidentIndex": 100.6,
            "LaggingIndex": 102.63
        }, {
            "Period": "2012/8/1",
            "Period_UTC": 1343779200000.0,
            "TAIEX": 7410,
            "MonitoringIndex": 15.0,
            "LeadingIndex": 97.69,
            "CoincidentIndex": 100.74,
            "LaggingIndex": 102.6
        }, {
            "Period": "2012/9/1",
            "Period_UTC": 1346457600000.0,
            "TAIEX": 7610,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 98.03,
            "CoincidentIndex": 100.85,
            "LaggingIndex": 102.65
        }, {
            "Period": "2012/10/1",
            "Period_UTC": 1349049600000.0,
            "TAIEX": 7438,
            "MonitoringIndex": 19.0,
            "LeadingIndex": 98.62,
            "CoincidentIndex": 100.93,
            "LaggingIndex": 102.79
        }, {
            "Period": "2012/11/1",
            "Period_UTC": 1351728000000.0,
            "TAIEX": 7256,
            "MonitoringIndex": 21.0,
            "LeadingIndex": 99.39,
            "CoincidentIndex": 100.96,
            "LaggingIndex": 103.07
        }, {
            "Period": "2012/12/1",
            "Period_UTC": 1354320000000.0,
            "TAIEX": 7631,
            "MonitoringIndex": 22.0,
            "LeadingIndex": 100.19,
            "CoincidentIndex": 101.0,
            "LaggingIndex": 103.47
        }, {
            "Period": "2013/1/1",
            "Period_UTC": 1356998400000.0,
            "TAIEX": 7759,
            "MonitoringIndex": 19.0,
            "LeadingIndex": 100.89,
            "CoincidentIndex": 101.1,
            "LaggingIndex": 103.89
        }, {
            "Period": "2013/2/1",
            "Period_UTC": 1359676800000.0,
            "TAIEX": 7933,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 101.4,
            "CoincidentIndex": 101.16,
            "LaggingIndex": 104.35
        }, {
            "Period": "2013/3/1",
            "Period_UTC": 1362096000000.0,
            "TAIEX": 7907,
            "MonitoringIndex": 18.0,
            "LeadingIndex": 101.75,
            "CoincidentIndex": 101.23,
            "LaggingIndex": 104.63
        }, {
            "Period": "2013/4/1",
            "Period_UTC": 1364774400000.0,
            "TAIEX": 7893,
            "MonitoringIndex": 17.0,
            "LeadingIndex": 102.04,
            "CoincidentIndex": 101.39,
            "LaggingIndex": 104.7
        }, {
            "Period": "2013/5/1",
            "Period_UTC": 1367366400000.0,
            "TAIEX": 8272,
            "MonitoringIndex": 19.0,
            "LeadingIndex": 102.29,
            "CoincidentIndex": 101.63,
            "LaggingIndex": 104.57
        }, {
            "Period": "2013/6/1",
            "Period_UTC": 1370044800000.0,
            "TAIEX": 7989,
            "MonitoringIndex": 23.0,
            "LeadingIndex": 102.53,
            "CoincidentIndex": 101.87,
            "LaggingIndex": 104.37
        }, {
            "Period": "2013/7/1",
            "Period_UTC": 1372636800000.0,
            "TAIEX": 8102,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 102.86,
            "CoincidentIndex": 102.04,
            "LaggingIndex": 104.16
        }, {
            "Period": "2013/8/1",
            "Period_UTC": 1375315200000.0,
            "TAIEX": 7932,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 103.25,
            "CoincidentIndex": 102.26,
            "LaggingIndex": 103.98
        }, {
            "Period": "2013/9/1",
            "Period_UTC": 1377993600000.0,
            "TAIEX": 8193,
            "MonitoringIndex": 20.0,
            "LeadingIndex": 103.66,
            "CoincidentIndex": 102.6,
            "LaggingIndex": 103.8
        }, {
            "Period": "2013/10/1",
            "Period_UTC": 1380585600000.0,
            "TAIEX": 8366,
            "MonitoringIndex": 21.0,
            "LeadingIndex": 104.04,
            "CoincidentIndex": 103.01,
            "LaggingIndex": 103.64
        }, {
            "Period": "2013/11/1",
            "Period_UTC": 1383264000000.0,
            "TAIEX": 8237,
            "MonitoringIndex": 21.0,
            "LeadingIndex": 104.38,
            "CoincidentIndex": 103.48,
            "LaggingIndex": 103.47
        }, {
            "Period": "2013/12/1",
            "Period_UTC": 1385856000000.0,
            "TAIEX": 8431,
            "MonitoringIndex": 24.0,
            "LeadingIndex": 104.7,
            "CoincidentIndex": 103.93,
            "LaggingIndex": 103.31
        }, {
            "Period": "2014/1/1",
            "Period_UTC": 1388534400000.0,
            "TAIEX": 8567,
            "MonitoringIndex": 22.0,
            "LeadingIndex": 104.98,
            "CoincidentIndex": 104.29,
            "LaggingIndex": 103.28
        }, {
            "Period": "2014/2/1",
            "Period_UTC": 1391212800000.0,
            "TAIEX": 8496,
            "MonitoringIndex": 25.0,
            "LeadingIndex": 105.24,
            "CoincidentIndex": 104.62,
            "LaggingIndex": 103.38
        }, {
            "Period": "2014/3/1",
            "Period_UTC": 1393632000000.0,
            "TAIEX": 8687,
            "MonitoringIndex": 25.0,
            "LeadingIndex": 105.43,
            "CoincidentIndex": 104.98,
            "LaggingIndex": 103.63
        }, {
            "Period": "2014/4/1",
            "Period_UTC": 1396310400000.0,
            "TAIEX": 8900,
            "MonitoringIndex": 29.0,
            "LeadingIndex": 105.58,
            "CoincidentIndex": 105.41,
            "LaggingIndex": 103.93
        }, {
            "Period": "2014/5/1",
            "Period_UTC": 1398902400000.0,
            "TAIEX": 8936,
            "MonitoringIndex": 24.0,
            "LeadingIndex": 105.69,
            "CoincidentIndex": 105.87,
            "LaggingIndex": 104.24
        }, {
            "Period": "2014/6/1",
            "Period_UTC": 1401580800000.0,
            "TAIEX": 9229,
            "MonitoringIndex": 26.0,
            "LeadingIndex": 105.81,
            "CoincidentIndex": 106.36,
            "LaggingIndex": 104.49
        }, {
            "Period": "2014/7/1",
            "Period_UTC": 1404172800000.0,
            "TAIEX": 9474,
            "MonitoringIndex": 27.0,
            "LeadingIndex": 105.91,
            "CoincidentIndex": 106.86,
            "LaggingIndex": 104.71
        }, {
            "Period": "2014/8/1",
            "Period_UTC": 1406851200000.0,
            "TAIEX": 9266,
            "MonitoringIndex": 29.0,
            "LeadingIndex": 105.98,
            "CoincidentIndex": 107.34,
            "LaggingIndex": 104.75
        }, {
            "Period": "2014/9/1",
            "Period_UTC": 1409529600000.0,
            "TAIEX": 9229,
            "MonitoringIndex": 27.0,
            "LeadingIndex": 106.03,
            "CoincidentIndex": 107.77,
            "LaggingIndex": 104.66
        }, {
            "Period": "2014/10/1",
            "Period_UTC": 1412121600000.0,
            "TAIEX": 8819,
            "MonitoringIndex": 24.0,
            "LeadingIndex": 106.07,
            "CoincidentIndex": 108.17,
            "LaggingIndex": 104.6
        }
    ];

    var factory = {};

    // Get all training datas 
    factory.getTrainingDatas = function () {
        return trainingdatas;
    };

    // Get the last period of data
    factory.getLatesPeriodData = function () {
        var lastIdx = trainingdatas.length - 1;
        return trainingdatas[lastIdx];
    };

    // Get data series array base on property name
    factory.getDataSeriesByProp = function (propName) {
        propName.toLowerCase();
        var result = [];
        for (var idx = 0; idx < trainingdatas.length; idx++) {
            switch (propName) {
                case "period":
                    result.push(trainingdatas[idx].Period);
                    break;
                case "period_utc":
                    result.push(trainingdatas[idx].Period_UTC);
                    break;
                case "taiex":
                    result.push({ x: trainingdatas[idx].Period_UTC, y: trainingdatas[idx].TAIEX });
                    break;
                case "monitoringindex":
                    result.push({ x: trainingdatas[idx].Period_UTC, y: trainingdatas[idx].MonitoringIndex });
                    break;
                case "leadingindex":
                    result.push({ x: trainingdatas[idx].Period_UTC, y: trainingdatas[idx].LeadingIndex });
                    break;
                case "coincidentindex":
                    result.push({ x: trainingdatas[idx].Period_UTC, y: trainingdatas[idx].CoincidentIndex });
                    break;
                case "laggingindex":
                    result.push({ x: trainingdatas[idx].Period_UTC, y: trainingdatas[idx].LaggingIndex });
                    break;
            }
        }
        return result;
    };    

    return factory;
});

